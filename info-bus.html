<!DOCTYPE html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Informasi Bus</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/favicon.svg">
    <!-- Place favicon.ico in the root directory -->

    <!-- Web Font -->

    <!-- ========================= CSS here ========================= -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/LineIcons.2.0.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/tiny-slider.css">
    <link rel="stylesheet" href="assets/css/glightbox.min.css">
    <link rel="stylesheet" href="assets/css/main.css">

</head>

<body data-page="ikepesertaan">
    <!--[if lte IE 9]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="https://browsehappy.com/">upgrade your browser</a> to improve
        your experience and security.
      </p>
    <![endif]-->

    <!-- Preloader -->
    <div class="preloader">
        <div class="preloader-inner">
            <div class="preloader-icon">
                <span></span>
                <span></span>
            </div>
        </div>
    </div>
    <!-- /End Preloader -->

    <!-- Start Header Area -->
    <header class="header navbar-area">
        <div id="navbar-container"></div>
    </header>
    <!-- End Header Area -->

    <!-- Start Breadcrumbs -->
    <div class="breadcrumbs overlay">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8 offset-lg-2 col-md-12 col-12">
                    <div class="breadcrumbs-content">
                        <h1 class="page-title">Informasi Peserta Tour 2025</h1>
                        <p>Periksa nama anda dan keluarga anda, apakah sudah terdaftar sebagai peserta tour ?</p>
                    </div>
                    <ul class="breadcrumb-nav">
                        <li><a href="index.html">Home</a></li>
                        <li>Info Peserta</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- End Breadcrumbs -->

    <!-- Start Blog Singel Area -->
    <section class="section blog-single">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-12">
                    <div class="single-inner">
                        <div class="post-thumbnils">
                        </div>
                        <div class="post-details">
                            <div class="detail-inner">
                                <!-- post meta -->
                                <ul class="custom-flex post-meta">
                                    <li>
                                        <a href="javascript:void(0)">
                                            <i class="lni lni-calendar"></i>
                                            10 Agustus 2024
                                        </a>
                                    </li>
                                </ul>
                                <h2 class="post-title">
                                    <a href="javascript:void(0)">INFORMASI PEMBAGIAN BUS TOUR 2025 <span class="sheet-name"></span><br></a>
                                </h2>

                                <p>Hallo semuanya üëã, liburan seru kita ke <b>Ancol</b> sebentar lagi dimulai!  
                                Perjalanan kali ini bukan hanya sekadar jalan-jalan, tapi juga kesempatan untuk mempererat kebersamaan dan melepas penat setelah rutinitas sehari-hari.</p>

                                <p>Yuk, segera cek nomor bus kamu di bawah ini üöç. Pastikan keluarga atau rekan satu tim tidak tertinggal ya.  
                                Sampai jumpa di titik kumpul, mari kita nikmati serunya perjalanan bersama! üéâ</p>

                                <p>Apabila terdapat kesalahan atau kendala pada data yang ditampilkan, silakan segera hubungi <b>Panitia Tour 2025</b> berikut:</p>

                                <p>
                                    <b>Panitia FKI</b><br>
                                    <a href="https://wa.me/628xxxxxxx" target="_blank">Tangkas Wicaksono <i class="lni lni-whatsapp"></i></a><br>
                                    <a href="https://wa.me/628xxxxxxx" target="_blank">Septiawan Juwita B</a><br><br>

                                    <b>Panitia FK</b><br>
                                    <a href="https://wa.me/628xxxxxxx" target="_blank">Muhlis Nur Ahmad <i class="lni lni-whatsapp"></i></a><br>
                                    <a href="https://wa.me/628xxxxxxx" target="_blank">Reza Kurniawan <i class="lni lni-whatsapp"></i></a>
                                </p>

                                <h3>Keterangan</h3>
                                <ul class="list">
                                    <li><i class="lni lni-chevron-right-circle"></i> Nama yang ditampilkan adalah 4 huruf awal dari nama karyawan.</li>
                                    <li><i class="lni lni-chevron-right-circle"></i> NIK yang ditampilkan diambil dari 4 digit terakhir NIK karyawan.</li>
                                    <li><i class="lni lni-chevron-right-circle"></i> Untuk pasangan suami-istri yang sama-sama karyawan FK/FKI, data peserta anak mengikuti data suami.</li>
                                </ul>

                                <p><b>Pilih tujuan</b> yang sebelumnya sudah kamu pilih saat pendaftaran:</p>


                                <ul class="nav nav-tabs" id="myTab" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab" aria-controls="overview" aria-selected="true">Dufan</button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="curriculum-tab" data-bs-toggle="tab" data-bs-target="#curriculum" type="button" role="tab" aria-controls="curriculum" aria-selected="false">ODS-Seaworld-JBL</button>
                                    </li>
                                </ul>
                                <div class="tab-content" id="myTabContent">
                                    <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview-tab">
                                        <div class="course-overview">
                                            <p>Pilih Nomor bus di bawah ini</p>
                                                    <div class="comment-form">
                                                        <form action="#" method="POST">
                                                            <div class="row">
                                                                <div class="col-lg-6 col-md-12 col-12">
                                                                    <div class="form-box form-group">
                                                                        <select id="select-dufan" class="form-control form-control-custom">
                                                                            <option value="">-- Pilih Nomor Bus --</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>
                                            <div class="course-curriculum" id="data-dufan">

                                            </div>
                                            
                                            
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="curriculum" role="tabpanel" aria-labelledby="curriculum-tab">
                                        <div class="course-overview">
                                            <p>Pilih Nomor bus di bawah ini</p>
                                                    <div class="comment-form">
                                                        <form action="#" method="POST">
                                                            <div class="row">
                                                                <div class="col-lg-6 col-md-12 col-12">
                                                                    <div class="form-box form-group">
                                                                        <select id="select-ODS" class="form-control form-control-custom">
                                                                            <option value="">-- Pilih Nomor Bus --</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>
                                            <div class="course-curriculum" id="data-ODS">
                                                
                                            </div>
                                        </div>  
                                    </div>
                                </div>
                                            <!-- Manual Cari NIK-->
                                           <div class="course-curriculum">
                                               <ul class="curriculum-sections">
                                                <li class="single-curriculum-section">
                                                        <div class="section-header">
                                                            <div class="section-left">
                                                                <h5 class="title" style="text-align: center;">Cari Manual</h5>
                                                                <form>
                                                                    <div class="form-group">
                                                                        <input class="margin-5px-bottom" type="text" id="nik" placeholder="Masukan NIK anda">
                                                                        
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    <ul class="section-content" id="data-manual">
                                                    </ul>
                                                </li>
                                              </ul>
                                            </div>
                                

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- End Blog Singel Area -->

    <!-- Start Footer Area -->
    <div id="footer-container"></div>
    <!--/ End Footer Area -->

    <!-- ========================= scroll-top ========================= -->
    <a href="#" class="scroll-top btn-hover">
        <i class="lni lni-chevron-up"></i>
    </a>

    <!-- ========================= JS here ========================= -->
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/count-up.min.js"></script>
    <script src="assets/js/wow.min.js"></script>
    <script src="assets/js/tiny-slider.js"></script>
    <script src="assets/js/glightbox.min.js"></script>
    <script src="assets/js/main.js"></script>

    <script>
        // Fungsi untuk memuat file HTML ke dalam elemen
        function loadHTML(elementId, filePath) {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', filePath, true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    document.getElementById(elementId).innerHTML = xhr.responseText;

                    // Jalankan highlight hanya setelah navbar dimuat
                    if (filePath.includes('navbar.html')) {
                        highlightActiveLink();
                    }
                }
            };
            xhr.send();
        }

        // Fungsi untuk menandai link navbar yang aktif
        function highlightActiveLink() {
            const pageCode = document.body.getAttribute('data-page');
            if (!pageCode) return;

            const navLinks = document.querySelectorAll('#nav a');

            navLinks.forEach(link => {
                const target = link.getAttribute('data-target');
                if (target === pageCode) {
                    link.classList.add('active');
                    const parentItem = link.closest('.nav-item');
                    if (parentItem) parentItem.classList.add('active-parent');
                } else {
                    link.classList.remove('active');
                }
            });
        }

        // Load awal
        loadHTML('navbar-container', 'menu/navbar.html');
        loadHTML('footer-container', 'menu/footer.html');

        // Fungsi memuat konten ke dalam #content-container
        function loadContent(filePath) {
            loadHTML('content-container', filePath);
        }
    </script>

<script>
const CONFIG = {
  SPREADSHEET_ID: "1bKvdfmKe1SViPxiZSf2P3Od90YYloIctSJt3WVt1enU"
};
const SHEET_CONSOLE = "console";
const SHEET_BUS = "Bus";

let consoleData = [];
let busData = [];

// Fungsi load CSV
async function loadCSV(sheetName) {
  const url = `https://docs.google.com/spreadsheets/d/${CONFIG.SPREADSHEET_ID}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent(sheetName)}`;
  const response = await fetch(url);
  const csvText = await response.text();
  return csvText
    .trim()
    .split("\n")
    .map(r => r.split(",").map(cell => cell.replace(/^"|"$/g, "").trim()));
}

// Fungsi universal untuk load dropdown
async function loadDataUniversal(selectId, filterValue, renderFn) {
  // pastikan data tidak dobel load
  if (consoleData.length === 0 || busData.length === 0) {
    consoleData = await loadCSV(SHEET_CONSOLE);
    busData = await loadCSV(SHEET_BUS);
  }

  const selectEl = document.getElementById(selectId);
  selectEl.innerHTML = '<option value="">-- Pilih Nomor Bus --</option>';

  consoleData.forEach(row => {
    if (row[3] === filterValue) {
      const opt = document.createElement("option");
      opt.value = row[0];        // kolom 1
      opt.textContent = row[1];  // kolom 2
      opt.dataset.link = row[2]; // kolom 3
      selectEl.appendChild(opt);
    }
  });

  selectEl.addEventListener("change", function() {
    const selectedValue = this.value;
    const selectedOption = this.options[this.selectedIndex];
    const linkGrup = selectedOption.dataset.link || "#";
    renderFn(selectedValue, linkGrup);
  });
}

// Fungsi universal untuk render bus
function renderBusUniversal(busId, linkGrup, containerId, statusCol) {
  const container = document.getElementById(containerId);
  container.innerHTML = "";

  if (!busId) {
    console.log("Tidak ada bus dipilih");
    return;
  }

  console.log("Render bus:", busId);

  let nomor = 1;
  let items = "";

  busData.forEach(row => {
    if (row[0] === busId) {
      const nama = row[3];
      const status = (row[statusCol] || "").toLowerCase();
      items += `
        <li class="course-item">
          <a class="section-item-link lesson" href="JavaScript:void(0);">
            <span class="item-name" style="max-width: 50px;">${nomor++}</span>
            <span class="item-name">${nama}</span>
            <div class="course-item-meta">
              <span class="item-meta ${status}">${status}</span>
            </div>
          </a>
        </li>
      `;
    }
  });

  container.innerHTML = `
    <ul class="curriculum-sections">
      <li class="single-curriculum-section">
        <div class="section-header">
          <div class="section-left">
            <h5 class="title">Bus ${busId}</h5>
          </div>
        </div>
        <ul class="section-content">${items}</ul>
        <div class="bottom-content">
          <div class="row align-items-center">
            <div class="col-lg-6 col-md-6 col-12">
              <div class="button">
                <a href="${linkGrup}" class="btn"><i class="lni lni-whatsapp"></i> Join Grup Bus</a>
              </div>
            </div>
          </div>
        </div>
      </li>
    </ul>
  `;
}

// jalankan saat halaman load
document.addEventListener("DOMContentLoaded", async () => {
  // untuk Dufan ‚Üí status ada di kolom ke-6 (index 5)
  await loadDataUniversal("select-dufan", "Dufan", 
    (busId, linkGrup) => renderBusUniversal(busId, linkGrup, "data-dufan", 5));

  // untuk ODS ‚Üí status ada di kolom ke-5 (index 4)
  await loadDataUniversal("select-ODS", "ODS-Seaworld-JBL", 
    (busId, linkGrup) => renderBusUniversal(busId, linkGrup, "data-ODS", 4));
});
</script>

<script>
document.getElementById("nik").addEventListener("input", function () {
  const nik = this.value.trim();
  if (nik.length >= 5) { // bisa atur minimal panjang biar gak terlalu sering search
    cariManual(nik);
  }
});

function cariManual(nik) {
  const container = document.getElementById("data-manual");
  container.innerHTML = "<li>üîç Mencari data...</li>";

  if (!nik) {
    container.innerHTML = "<li>‚ùå Masukkan NIK terlebih dahulu</li>";
    return;
  }

  // cari nik di busData
  const foundRow = busData.find(row => row[7] === nik);

  if (!foundRow) {
    container.innerHTML = "<li>‚ùå NIK tidak ditemukan</li>";
    return;
  }

  const kodeKeluarga = foundRow[6];
  const busId = foundRow[0];
    const dest = foundRow[15];
  // ambil nama bus dari consoleData
  const busRow = consoleData.find(row => row[0] === busId);
  const namaBus = busRow ? busRow[1] : busId;

  // ambil semua anggota keluarga (kode keluarga sama)
  const anggotaKeluarga = busData.filter(row => row[6] === kodeKeluarga);

  let nomor = 1;
  let items = "";

  anggotaKeluarga.forEach(row => {
    const nama = row[3];
    const status = row[4] ? row[4].toLowerCase() : "-"; // kolom status
    items += `
      <li class="course-item">
        <a class="section-item-link lesson" href="javascript:void(0);">
          <span class="item-name" style="max-width: 50px;">${nomor++}</span>
          <span class="item-name">${nama}</span>
          <div class="course-item-meta">
            <span class="item-meta ${status}">${status}</span>
          </div>
        </a>
      </li>
    `;
  });

  container.innerHTML = `
    ${items}
    <h3 style="text-align: center; margin-top:20px;">Nomor Bus Anda</h3>
    <h1 style="text-align: center;">${namaBus}</h1>
    <h3><br></h3>
    <h3 style="text-align: center; margin-top:20px;">Tujuan Destinasi</h3>
    <h1 style="text-align: center;">${dest}</h1>
    <h3><br></h3>
  `;
}
</script>





</body>

</html>
